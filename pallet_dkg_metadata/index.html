<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DKG Metadata Module"><title>pallet_dkg_metadata - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-07416f8512e0e04c.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_dkg_metadata" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (4c8bb79d9 2023-07-15)" data-channel="nightly" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../pallet_dkg_metadata/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../pallet_dkg_metadata/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate pallet_dkg_metadata</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.2.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_dkg_metadata</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/pallet_dkg_metadata/lib.rs.html#15-2532">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="dkg-metadata-module"><a href="#dkg-metadata-module">DKG Metadata Module</a></h2>
<p>A pallet to manage metadata about the DKG and DKG proposal system.</p>
<h3 id="overview"><a href="#overview">Overview</a></h3>
<p>The DKG Metadata pallet manages the following metadata about the DKG and DKG proposal system:</p>
<ul>
<li>The active DKG public key</li>
<li>The active DKG authorities</li>
<li>The next DKG public key</li>
<li>The next DKG authorities</li>
<li>The DKG signature threshold (the <code>t</code> in <code>t-out-of-n</code> threshold signatures)</li>
<li>The key refresh process</li>
<li>The misbehavior reporting process</li>
</ul>
<p>The pallet tracks authority changes after each session and updates the metadata for the
current and next authority sets respectively. The pallet also exposes a way for the root origin
to update the signature threshold used in the DKG signing system.</p>
<p>The pallet is responsible with initiating the key refresh process for rotating the DKG keys
across authority set changes and executing the rotation when a new session starts.</p>
<p>The pallet tracks reputations of DKG authorities by providing extrinsics and storage for
submitting misbehaviour reports about authorities that misbehave.</p>
<h4 id="terminology"><a href="#terminology">Terminology</a></h4>
<ul>
<li><strong>Authority</strong>: A DKG authority.</li>
<li><strong>Authority Set</strong>: A set of DKG authorities.</li>
<li><strong>Active DKG public key</strong>: The public key of the DKG protocol that is currently active.</li>
<li><strong>Next DKG public key</strong>: The public key of the DKG protocol that will be active after the next
authority set change.</li>
<li><strong>DKG signature threshold</strong>: The <code>t</code> in <code>t-out-of-n</code> threshold signatures used in the DKG
signing system.</li>
<li><strong>Misbheaviour Report</strong>: A report of a DKG authority misbehaving.</li>
<li><strong>Refresh delay</strong>: The length of time within a session that the key refresh protocol will be
initiated.</li>
</ul>
<h4 id="implementation"><a href="#implementation">Implementation</a></h4>
<p>The pallet is implemented to track and maintain a variety of different pieces of data. It is the
primary pallet used to store the active and next DKG public keys that are generated by the
active and next authorities of the underlying blockchain protocol. A runtime API is used to
expose the active and next authorities to the external workers responsible with executing the
DKG and signing protocol.</p>
<p>The pallet exposes a variety of extrinsics for updating metadata:</p>
<ul>
<li><code>set_threshold</code>: Allows a root-origin to update the DKG signature threshold used in the
threshold signing protocol.</li>
<li><code>set_refresh_delay</code>: Allows a root-origin to update the delay before the key refresh process
is initiated.</li>
<li><code>submit_misbehaviour_reports</code>: Allows authorities to submit misbehaviour reports. Once the
<code>threshold</code> number of reports is submitted, the offending authority will lose reputation.</li>
<li><code>submit_public_key</code>: Allows submitting of the genesis public key by the initial authorities of
the DKG protocol.</li>
<li><code>submit_next_public_key</code>: Allows submitting of the next public key by the next authorities of
the DKG protocol.</li>
</ul>
<p>The refresh process is initiated <code>T::RefreshDelay</code> into each session. A RefreshProposal is
created and sent directly to the <code>pallet-dkg-proposal-handler</code> for inclusion into the unsigned
proposal queue and soon after for signing. Once this proposal is signed, the signature is posted
back on-chain to this pallet which rotates the DKG keys when the session ends.</p>
<p>The misbehaviour reporting process relies on a honest-threshold assumption. When DKG authorities
misbehave offchain, any detecting authority can submit a report of the offending authority. If a
<code>threshold</code> number of reports is submitted, then the offending authority will lose reputation.
This reputation map is utilized by each DKG authority to ensure every authority can generate a
deterministic signing set for the threshold signing protocols. The signing set is taken to
initially be the top <code>t</code> DKG authorities by reputation.</p>
<h3 id="related-modules"><a href="#related-modules">Related Modules</a></h3>
<ul>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame/system"><code>System</code></a></li>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame/support"><code>Support</code></a></li>
<li><a href="../../pallet-dkg-proposals"><code>DKG Proposals</code></a></li>
<li><a href="../../pallet-dkg-proposal-handler"><code>DKG Proposal Handler</code></a></li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_dkg_metadata::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_dkg_metadata::pallet">pallet</a></div><div class="desc docblock-short">The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</div></li><li><div class="item-name"><a class="mod" href="types/index.html" title="mod pallet_dkg_metadata::types">types</a></div></li><li><div class="item-name"><a class="mod" href="weights/index.html" title="mod pallet_dkg_metadata::weights">weights</a></div><div class="desc docblock-short">Autogenerated weights for pallet_dkg_metadata</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DKGPeriodicSessions.html" title="struct pallet_dkg_metadata::DKGPeriodicSessions">DKGPeriodicSessions</a></div><div class="desc docblock-short">Periodic Session manager for DKGMetadata
To rotate a session we require three conditions</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.BLOCKS_TO_WAIT_BEFORE_KEYGEN_RETRY_TRIGGER.html" title="constant pallet_dkg_metadata::BLOCKS_TO_WAIT_BEFORE_KEYGEN_RETRY_TRIGGER">BLOCKS_TO_WAIT_BEFORE_KEYGEN_RETRY_TRIGGER</a></div></li><li><div class="item-name"><a class="constant" href="constant.INITIAL_REPUTATION.html" title="constant pallet_dkg_metadata::INITIAL_REPUTATION">INITIAL_REPUTATION</a></div></li><li><div class="item-name"><a class="constant" href="constant.REPUTATION_INCREMENT.html" title="constant pallet_dkg_metadata::REPUTATION_INCREMENT">REPUTATION_INCREMENT</a></div></li></ul></section></div></main></body></html>